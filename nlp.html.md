# nlp


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## token annotation widget

------------------------------------------------------------------------

<a href="https://github.com/FrLars21/flcore/blob/main/flcore/nlp.py#L13"
target="_blank" style="float:right; font-size:smaller">source</a>

### TokenAnnotator

>  TokenAnnotator (*args:Any, **kwargs:Any)

*Main AnyWidget base class.*

Small example including some pre-computed annotation.

``` python
a = TokenAnnotator(text='John Smith visited Microsoft in Seattle last week.', 
               labels=['person', 'location', 'organization'],
               annotations=[{'start': 19, 'end': 28, 'class': 'organization'}])
a
```

    TokenAnnotator(annotations=[{'start': 19, 'end': 28, 'class': 'organization'}], labels=['person', 'location', …

We can access the annotations from Python!

``` python
a.annotations
```

    [{'start': 19, 'end': 28, 'class': 'organization'}]

.. it also works ok for longer documents:

``` python
x = '# Punkt 9: Kontrakt med Erhvervshus Nord 2024-2026\n\n### EMN-2023-01106\n## Bilag\n\n### Udkast - Operatøraftale om erhvervsudvikling i 2024-2026\n\n\n-----\n\n### 9 (Åben) Kontrakt med Erhvervshus Nord 2024-2026\n\n**Sags ID: EMN-2023-01106**\n\n**Ansvarligt center: Direktionssekretariat**\n\n**Beslutningskompetence**\nØU/BR\n\n**Sagsfremstilling**\nDer er udarbejdet en 3 årig aftale, der løber fra 1. januar 2024 – 31. december 2026.\n\nDette sker ved at arbejde målrettet gennem:\n\n  - erhvervsservice over for virksomhederne i Frederikshavn Kommune.\n\n  - erhvervsudvikling hvor Erhvervshus Nord gennemfører en aktiv\nerhvervsudviklingsindsats over for de enkelte virksomheder med\n\nunderstøtning af kommunens strategier, politikker og konkrete indsatser\nherunder Recycling City og den grønne omstilling.\n\n  - erhvervsstrukturudvikling, hvor Erhvervshus Nord arbejder Strategisk med den\nlangsigtede erhvervsstrukturudvikling i Frederikshavn Kommune, gennem\n\nløbende dialog med kommunen samt konkrete indsatser for at tiltrække\nvirksomheder og investeringer med stor positiv erhvervsøkonomisk afsmitning i\nlokalsamfundet.\n\n  - inddragelse og samarbejder med øvrige erhvervsfremmeaktører.\n\nFor løsning af erhvervsserviceopgaverne betales en ydelse på 4.400.000 kr. inkl. moms,\nbeløbet pristalsreguleres med virkning fra 2025. Betalingen sker i 2 årlige rater med\nførste halvdel ved årets begyndelse og anden halvdel pr. 1. juli, svarende til 2.200.000 kr.\npr. rate. Der reserveres desuden et årligt kommunalt beløb på 500.000 kr. til eventuelle\nsærlige indsatser. Beløb op til 500.000 kr. udbetales, hvis der i forlængelse af de årlige\nmøder aftales specielle indsatser med Økonomiudvalget.\n\nErhvervshus Nord ønsker, at der i aftalen indgår, at basisaftalen og aftalen om særlige\nindsatser pristalsreguleres i 2024, 2025 og 2026.\n\n**Indstilling**\nDirektionssekretariatet indstiller, at\n1. aftale for 2024-2026 mellem kommunen og Frederikshavn Erhvervsråd\ngodkendes\n2. basisaftalen pristalsreguleres med virkning fra 2024\n3. det eventuelle beløb til særlig indsatser ikke pristalsreguleres.\n\n**Tidligere beslutninger:**\n\n\n-----\n\nUdvalg: Økonomiudvalget 2022-2025\n\nDato: 26-04-2023\n\nAnbefales med den bemærkning, at der betales en ydelse på 4.400.000 kr. ekskl. moms.\n\n**Beslutninger:**\n\nØkonomiudvalgets indstilling godkendt.\n\nAfbud fra Martin Tøttrup Kelkelund (A). I stedet deltog Marie Gade Madsen (A).\nAfbud fra Almina Nikontovic (A). I stedet deltog Bent Hieronymus Pedersen (A).\n\n**Bilag**\n\n1. Udkast - Operatøraftale om erhvervsudvikling i 2024-2026 (DokumentID: 7146136 - EMN-2023-01106)\n\n\n-----\n\n'
a2 = TokenAnnotator(text = x, labels=['person', 'organization', 'date'], annotations=[{'start': 2316, 'end': 2340, 'class': 'person'}])
a2
```

    TokenAnnotator(annotations=[{'start': 2316, 'end': 2340, 'class': 'person'}], labels=['person', 'organization'…

``` python
a2.annotations
```

    [{'start': 2316, 'end': 2340, 'class': 'person'}]

### Weak Labelling with RegEx Patterns

------------------------------------------------------------------------

<a
href="https://github.com/FrLars21/flcore/blob/main/flcore/nlp.py#L254"
target="_blank" style="float:right; font-size:smaller">source</a>

### annotate

>  annotate (text:str, patterns:Dict[str,str])

\*Annotate text with multiple patterns. If a pattern contains capture
groups, uses the first capture group; otherwise uses the full match.

Example: annotate(“Hi there, John Doe!”, { “greeting”: r’Hi|Hello’ })\*

``` python
doc = annotate("Hi there, John Doe!", {
    "person": r'[A-Z][a-z]+(?:\s+[A-Z][a-z]+)+',
    "greeting": r'Hi|Hello'
})
doc
```

    {'text': 'Hi there, John Doe!',
     'annotations': [{'class': 'greeting', 'start': 0, 'end': 2},
      {'class': 'person', 'start': 10, 'end': 18}]}

We can pass this doc to the annotator class to visualize.

Note: if we provide a list of labels to TokenAnnotator, we can also edit
the weak annotations.

``` python
TokenAnnotator(**doc)
```

    TokenAnnotator(annotations=[{'class': 'greeting', 'start': 0, 'end': 2}, {'class': 'person', 'start': 10, 'end…

### Patterns

A collection of common RegEx patterns that often come in handy. Useful
for stuff like weak annotations.

Let’s start with a pattern to match names

Got Sonnet to give some examples of people names to test :)

``` python
text = "Here are some people: Jean-Paul O'Connor, María-José García, Søren Kierkegaard, N'Golo Kanté, Smith-Jones, and François van der Meer"
TokenAnnotator(**annotate(text, {'person': re_person}))
```

    TokenAnnotator(annotations=[{'class': 'person', 'start': 22, 'end': 40}, {'class': 'person', 'start': 42, 'end…

Email pattern

``` python
# todo: email pattern
```

URL pattern

``` python
# todo
```

### export
